# Static typing for Django project
[mypy]
python_version = 3.12
plugins = mypy_django_plugin.main

# Be reasonably strict but practical for a web app
warn_unused_ignores = true
warn_return_any = true
no_implicit_optional = true
check_untyped_defs = true
disallow_incomplete_defs = true
strict_equality = true

# Faster & friendlier output
incremental = true
pretty = true
show_error_codes = true

# Where to resolve project imports from
mypy_path = apps/backend

# Ignore frontend, generated, and build artifacts
exclude = (?x)(
    ^apps/frontend/ |
    ^apps/.*/migrations/ |
    ^static/ |
    ^tests/fixtures/
)$

# Django plugin settings
[mypy.plugins.django-stubs]
# Use dev locally; in CI you can export DJANGO_SETTINGS_MODULE to prod/test
django_settings_module = config.settings.dev

# Relax/ignore where appropriate
[mypy-apps.*.migrations.*]
ignore_errors = true

[mypy-tests.*]
disallow_incomplete_defs = false
check_untyped_defs = false
