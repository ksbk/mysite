{% load static %}
{% load core_vite %}
<!DOCTYPE html>
<html lang="en">
    <head>
        {# djlint:off #}
      <meta charset="UTF-8"/>
      <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
      <meta name="color-scheme" content="light dark"/>
      <meta name="referrer" content="strict-origin-when-cross-origin"/>
      <meta name="description" content="{% block meta_description %}{{ SITE.meta_description }}{% endblock %}"/>
      <meta name="keywords" content="{% block meta_keywords %}{{ SITE.meta_keywords }}{% endblock %}"/>
      <meta name="author" content="{% block meta_author %}MySite{% endblock %}"/>
      <!-- Open Graph -->
      <meta property="og:type" content="website"/>
      <meta property="og:url" content="{% block og_url %}{{ request.build_absolute_uri }}{% endblock %}"/>
      <meta property="og:title" content="{% block og_title %}{{ SITE.site_name }}{% endblock %}"/>
      <meta property="og:description" content="{% block og_description %}MySite - A modern Django + Vite application{% endblock %}"/>
      <!-- Twitter Cards -->
      <meta property="twitter:card" content="summary_large_image"/>
      <meta property="twitter:url" content="{% block twitter_url %}{{ request.build_absolute_uri }}{% endblock %}"/>
      <meta property="twitter:title" content="{% block twitter_title %}{{ SITE.site_name }}{% endblock %}"/>
      <meta property="twitter:description" content="{% block twitter_description %}MySite - A modern Django + Vite application{% endblock %}"/>
      <title>{% block title %}{{ SITE.site_name }}{% endblock %}</title>
      <!-- Favicons -->
      <link rel="icon" type="image/svg+xml" href="{% static 'favicon.svg' %}"/>
      <link rel="alternate icon" href="{% static 'favicon.ico' %}"/>
      {% block preconnect %}{% if VITE_DEV and VITE_DEV_AVAILABLE %}<link rel="preconnect" href="{{ VITE_DEV_SERVER_URL }}"/>{% endif %}{% endblock %}
        {# djlint:on #}
        {% block head_extra %}{% endblock %}
        {# Assets: dev uses HMR when server is available; prod uses manifest #}
        {% if VITE_DEV and VITE_DEV_AVAILABLE %}
            {% vite_hmr %}
        {% else %}
            {% vite_asset 'src/main.ts' %}
        {% endif %}
        {% block css %}{% endblock %}
        {% block extra_css %}{% endblock %}
    </head>
    <body class="{% block body_class %}bg-white text-slate-900 antialiased{% endblock %}">
        <!-- Skip to main content -->
        <a href="#main-content"
           class="sr-only focus:not-sr-only focus:absolute focus:top-4 focus:left-4 bg-blue-600 text-white px-4 py-2 rounded-md z-50 transition-all duration-200">Skip to main content
        </a>
        <!-- Header -->
        {% block header %}
            {% include "components/header.html" %}
        {% endblock %}
        {% block messages %}
            {% include "components/messages.html" %}
        {% endblock %}
        {% block breadcrumbs %}
            {% include "components/breadcrumbs.html" %}
        {% endblock %}
        <!-- Main Content Area -->
        {% block main %}
            <main id="main-content" role="main" class="flex-1">
                <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
                    <div class="prose prose-lg max-w-none">
                        {% block content %}
                            <!-- Default content fallback -->
                            <div class="text-center py-12">
                                <h1 class="text-4xl font-bold text-gray-900 mb-4">Welcome to MySite</h1>
                                <p class="text-xl text-gray-600 max-w-2xl mx-auto">A modern Django + Vite application built with best practices.</p>
                            </div>
                        {% endblock %}
                    </div>
                </div>
            </main>
        {% endblock %}
        <!-- Footer -->
        {% block footer %}
            {% include "components/footer.html" %}
        {% endblock %}
        <!-- JavaScript Assets -->
        {% block js %}{% endblock %}
        {% block extra_js %}{% endblock %}
        <!-- Analytics and Tracking -->
        {% block analytics %}
            {% if not DEBUG %}<!-- Production analytics scripts go here -->{% endif %}
        {% endblock %}
        <noscript>
            <div class="fixed bottom-4 right-4 bg-gray-800 text-white px-4 py-2 rounded-md shadow-lg z-40">
                This site works best with JavaScript enabled.
            </div>
        </noscript>
        <!-- Development Banner -->
        {% if DEBUG %}
            <div class="fixed bottom-4 right-4 bg-yellow-100 border border-yellow-400 text-yellow-800 px-4 py-2 rounded-md shadow-lg z-40">
                <strong>Development Mode</strong>
                <p class="text-sm">This site is running in debug mode.</p>
            </div>
        {% endif %}
    </body>
</html>
